# DB 기출
<br>

### 정규화란 무엇입니까?

<details>
   <summary> 답안 보기 (👈 Click)</summary>
<br />

[참고: 데이터베이스 개론]

+ 8장에서는 관계 데이터 모델에 기반을 두고 데이터베이스를 설계하는 방법 중 
E-R 모델과 릴레이션 변환 규칙을 이용하는 방법을 살펴보았다

이 장에서는 정규화를 이용해 데이터베이스를 설계하는 방법에 대해 소개한다
정규화는 데이터베이스를 설계한 후 설계 결과물을 검증하기 위해 사용하기도 한다
앞에서도 언급했듯이, 두 설계 방법은 데이터베이스 설계 결과물이 비슷한 수준을
유지하므로 상황에 따라 적절한 방법을 선택하면 된다

데이터베이스를 잘못 설계하면 불필요한 데이터 중복이 발생하여 릴레이션에 대한 데이터의 삽입, 수정, 삭제 연산을 수행할 때 부작용이 발생할 수 있다. 이러한 부작용을 이상 현상이라 한다
이상 현상을 제거하면서 데이터베이스를 올바르게 설계해나가는 과정이 정규화다
정규화의 필요성과 방법을 구체적으로 알아보기에 앞서 먼저 이상 현상을 종류별로 자세히 알아보자
</details>

-----------------------

### 이상 현상이란 무엇입니까?

<details>
   <summary> 답안 보기 (👈 Click)</summary>

[참고: 데이터베이스 개론]

+ 
1) 이상 현상의 종류
- 이상 현상에는 [그림 9-1]과 같이 삽입 이상, 갱신 이상, 삭제 이상이 있다
   삽입 이상 - 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제
   갱신 이상 - 중복 투플 중 일부만 변경하여 데이터가 불일치하게 되는 모순의 문제
   삭제 이상 - 투플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제

 [그림 9-2]의 이벤트 참여 릴레이션을 이용해 잘못 설계된 릴레이션에서 발생할 수 있는
 이상 현상을 살펴보고, 이를 통해 이상 현상의 개념을 이해해보자. 

[그림 9-2]의 이벤트참여 릴레이션은 고객들이 이벤트에 참여한 결과를 저장하고 있는 릴레이션이다. 고객에 대한 정보인 고객아이디, 고객이름, 등급과 고객이 참여한 이벤트에 대한 정보인 이벤트번호, 당첨여부를 포함하고 있다. 
한 고객이 여러 이벤트에 참여할 수 있으므로 고객아이디만으로는 투플을 유일하게 식별할 수 없다.
그러므로 고객아이디와 이벤트번호 속성을 함께 사용하여 이벤트참여 릴레이션의 기본키를 구성한다. 

고객 한 명이 여러 이벤트에 참여할 수 있으므로 이벤트참여 릴레이션에는 동일한 고객의 
이름과 등급이 여러 번 나타날 수 있다.
예를 들어, 아이디가 apple인 고객은 3개의 이벤트에 참여하므로
고객의 이름과 등급이 이벤트참여 릴레이션에 세 번 저장된다.
이렇게 동일한 데이터가 여러 번 중복되어 저장되면 저장 공간을 낭비할 뿐 아니라
릴레이션에 데이터를 삽입, 수정,삭제 할 때 삽입,갱신, 삭제 이상 현상이 발생할 수 있다 

1)삽입 이상
- 릴레이션에 새 데이터를 삽입하기 위해 원치 않는 불필요한 데이터도 함께 삽입해야 하는 문제를 삽입 이상이라 한다
  예를 들어, 아이디가 melon이고, 이름이 성원용, 등급이 gold인 신규 고객이 회원으로 가입하여, [그림 9-2]의 이벤트참여 릴레이션에 이 고객에 대한 데이터를 삽입해야 한다고 해보자.
  이 고객이 참여한 이벤트가 아직 업삳면 이벤트참여 릴레이션에 이 고객에 대한 데이터를 삽입할 수 없다. 이벤트참여 릴레이션의 기본키가 고객아이디와 이벤트번호 속성이고,
  기본키를 구성하는 속성은 널 값을 가질 수 없다는 제약이 존재하기 때문이다. 
  즉, 고객아이디와 참여한 이벤트번호가 모두 존재해야 이벤트참여 릴레이션에 새 고객의 데이터를 삽입할 수 있다. 따라서 성원용 고객에 대한 데이터를 이벤트참여 릴레이션에 삽입하려면 실제로 참여하지 않은 임시 이벤트번호를 삽입해야 하므로 이벤트참여 릴레이션에는 삽입 이상이 발생하게 된다. 

2) 갱신 이상
- 릴레이션의 중복된 투플들 중 일부만 수저앟여 데이터가 불일치하게 되는 모순이 발생하는 것을 
   갱신 이상이라한다. [그림9-2]의 이벤트참여 릴레이션에는 아이디가 apple인 고객에 대한 
   투플이 3개 존재하여, 고객아이디, 고객이름, 등급 속성의 값이 중복되어 있다. 
   아이디가 apple인 고객의 등급이 gold에서 vip로 변경된다면, 이벤트참여 릴레이션에서 
   apple 고객에 대한 투플 3개의 등급 속성 값이 모두 수정되어야 한다. 
   그렇지 않고 [그림9-2]와 같이 2개의 투플만 등급이 수정되면 apple 고객이 서로 다른 등급을 가지는 모순이 생겨 갱신 이상이 발생하게 된다 

3) 삭제 이상
- 릴레이션에서 투플을 삭제하면 꼭 필요한 데이터까지 함께 삭제하여 데이터가  손실되는 
  연쇄 삭제 현상을 삭제 이상이라 한다. 

아이디가 orange인 고객이 이벤트 참여를 취소하여 [그림 9-2]의 이벤트참여 릴레이션에서 관련된 투플을 삭제해야 한다면, [그림 9-5]와 같이 하나의 투플만 삭제하면 된다.
그런데 이 투플은 아이디가 orange인 고객이 참여하고 있는 이벤트에 대한 정보만 가지고 있는 것이 아니라, 해당 고객에 대한 정보인 고객아이디, 고객이름, 등급에 대한 정보도 유일하게 가지고 있다. 
따라서 이 투플이 삭제되면 이벤트 참여와 관련이 없음에도 불구하고 해당 고객에 대한 고객아이디, 고객이름, 등급 데이터까지 원치 않게 손실되는 삭제 이상이 발생하게 된다. 

[그림 9-2]의 이벤트참여 릴레이션에 여러 이상 현상이 발생하는 이유는 무엇일까?
관련이 없는 데이터, 즉 관련 없는 속성들을 하나의 릴레이션에 모아 두고 있기 때문이다.
이상 현상이 발생하지 않도록 하려면, 관련 있는 속성들로만 릴레이션을 구성해야 하는데,
이를 위해 필요한 것이 정규화다.

정규화는 이상 현상이 발생하지 않도록, 릴레이션을 관련이 있는 속성들로만 구성하기 위해 릴레이션을 분해하는 과정이다. 정규화를 통해 릴레이션 설계를 올바르게 완성할 수 있다. 

정규화를 수행하려면 먼저 릴레이션을 구성하는 속성들 간의 관련성을 판단할 수 있어야 한다.
정규화 과정에서 고려해야 하는 속성들 간의 관련성을 함수적 종속성이라고 한다.

일반적으로 릴레이션에 함수적 종속성이 하나 존재하도록 정규화를 통해 릴레이션을 분해한다.
그러므로 정규화를 본격적으로 살펴보기에 앞서 다음 절에서 함수적 종속성의 의미와 
함수적 종속성을 판단하는 방법부터 알아보자. 



</details>

-----------------------

### 함수 종속이란 무엇입니까?

<details>
   <summary> 답안 보기 (👈 Click)</summary>
<br />

[참고: 데이터베이스 개론]

+ 하나의 릴레이션을 구성하는 속성들읠 부분 집합을 X와 Y라 할 때,
어느 시점에서든 릴레이션 내의 모든 투플에서 X값에 대한 Y값이 항상 하나면
"X가 Y를 함수적으로 결정한다" 또는 "Y가 X에 함수적으로 종속되어 있다"라고 한다

함수 종속 관계는 X->Y로 표현하고, X를 결정자, Y를 종속자라고 한다

[그림 9-7]의 고객 릴레이션을 대상으로 속성 간의 함수 종속 관계를 판단해보자.

[그림 9-7]의 고객 릴레이션에서 각 고객아이디 속성 값에 대응되는 고객이름 속성과
등급 속성의 값이 단 하나이므로, 고객 아이디가 고객이름과 등급을 결정한다고 볼 수 있다.
예를 들어, 고객아이디가 apple인 고객은 이름이 정소화, 등급이 gold인 한 사람박에 없다.
그러므로 고객 릴레이션에서 고객이름과 등급 속성은 고객아이디 속성에 함수적으로 종속되어 있어,
고객아이디는 결정자가 되고 고객이름과 등급은 종속자가 된다. 

고객 릴레이션에 존재하는 함수 종속 관계는 다음과 같이 기호로 표현할 수 있다
하나의 릴레이션을 구성하는 속성들 간의 함수 종속 관계를 도식화하여 표현할 수 있다
이를 함수 종속 다이어그램이라고 하는데, 함수 종속 다이어그램은 복잡한 함수 종속 관계를 더 직관적으로 이해하는 데 도움이 된다.
예로 제시한 고객 릴레이션의 함수 종속 다이어그램은 [그림 9-9]와 같다 

함수 종속 관계를 판단할 때 유의할 점은, 현재 시점에 릴레이션에 포함된 속성 값만으로 판단하면 안된다는 것이다. 릴레이션에서 속성 값은 계속 변할 수 있기 때문에 속성 자체가 가지고 있는 특성과 의미를 기반으로 판단해야 한다. 

[그림 9-7]의 고객 릴레이션에서 함수 종속 관계를 판단할 때도 마찬가지다.
고객 릴레이션에 현재 저장되어 있는 속성 값이 아닌 속성 자체의 특성을 고려하여 함수 종속 관계를 판단해야 한다. 고객 릴레이션에서 고객아이디는 고객을 구별해주는 기본키 속성이기 때문에 아이디가 같은 서로 다른 고객이 존재할 수 없다.
그러므로, 고객아이디가 정해지면 오직 하나의 고객 이름과 등급이 결정된다.

일반적으로 투플을 유일하게 구별하는 기본키와 후보키는 그 특성 때문에 릴레이션을 구성하는 다른 모든 속성들을 함수적으로 결정한다.
하지만 이러한 특성으로 인해 함수 종속 관계 X->Y에서 기본키나 후보키만 결정자인 X가 될 수 있는 것은 아니다. 기본키나 후보키가 아니더라도 속성 Y값을 유일하게 결정하는 속성 X는 함수 종속 관계에서 모두 결정자가 될 수 있다.
물론 릴레이션 내의 여러 투플에서 속성 X 값이 같으면 이 값과 연관된 속성 Y 값도 모두 같아야
결정자로 인정받을 수 있다. 

[그림 9-10]의 이벤트참여 릴레이션을 대상으로 좀 더 복잡한 속성들 간의 함수 종속 관계를 판단해보자. 

[그림 9-10]의 이벤트참여 릴레이션에서는 고객 아이디가 고객 이름을 유일하게 결정한다.
고객아이디가 같으면 모든 투플에서 고객이름이 반드시 같은 값을 가지기 때문이다.
그러므로 고객이름은 고객아이디에 종속되어 있어, 고객아이디가 결정자가 되고 고객이름이 종속자가 된다.

그리고 기본키인 {고객아이디, 이벤트번호} 속성 집합은 당첨여부 속성을 유일하게 결정한다.
아이디가 apple인 고객이 참여한 E001 이벤트의 당첨여부는 Y만 존재하기 때문이다.

그러므로 당첨여부는 {고객아이디, 이벤트번호}에 종속되어 있어, {고객아이디, 이벤트번호}가 결정자가 되고 당첨여부가 종속자가 된다. 물론 당첨여부뿐 아니라 고객이름도 기본키인 {고객아이디, 이벤트번호}에 종속되어 있다. 

이벤트참여 릴레이션에 존재하는 함수 종속 관계를 기호로 표현하면 다음과 같다. 

이벤트참여 릴레이션에 존재하는 함수 종속 관계에서 
{고객아이디, 이벤트번호}에 종속되어 있는 고객 이름은 {고객아이디, 이벤트번호}의 일부분인 고객아이디에도 종속되어 있다.
이런 경우, 고객 이름 속성이 {고객아이디, 이벤트번호} 속성 집합에 부분 함수 종속되었다고 한다. 

반면, 당첨여부 속성은 {고객아이디, 이벤트번호}의 일부분이 아닌 속성 집합 전체에 종속되어 있다.
이런 경우에는 당첨여부 속성이 {고객아이디, 이벤트번호} 속성 집합에 완전 함수 종속되었다고 한다.

완전 함수 종속은 릴레이션에서 속성 집합 Y가 속성 집합 X에 함수적으로 종속되어 있지만,
속성 집합 X 전체에 종속된 것이지 일부분에 종속된 것이 아님을 의미한다. 
이와 반대로 부분 함수 종속은 속성 집합 Y가 속성 집합 X의 전체가 아닌 일부분에도
함수적으로 종속됨을 의미하므로, 부분 함수 종속 관계가 성립하려면 결정자가
여러 개의 속성들로 구성되어 있어야 한다
 
일반적으로 함수 종속이라고 하면 완전 함수 종속을 의미한다.
그러나 정규화를 수행하는 과정에서 릴렐이션이 부분 함수 종속 관계를 포함하고 있는지를 확인하는 경우가 있으므로 부분 함수 종속도 의미를 정확히 이해해둘 필요가 있다. 

[그림 9-10]의 이벤트참여 릴레이션에서 고객이름은 고객아이디에 완전 함수 종속되어 있지만, {고객아이디, 이벤트번호}에는 부분 함수 종속되어 있다. 
그리고 당첨여부는 {고객아이디, 이벤트번호}에 완전 함수 종속되어 있다.

완전 함수 종속과 부분 함수 종속을 모두 포함하는 이벤트참여 릴레이션에 대한 함수 종속 다이어그램은 [그림 9-12]와 같다. 

릴레이션에 존재하는 함수 종속 관계에서는 결정자와 종속자가 같거나, 결정자가 종속자를 포함하는 것처럼 당연한 함수 종속 관계는 고려하지 않는다. 예를 들어, 이벤트참여 릴레이션에 존재하는 다음과 같은 함수 종속 관계는 당연하게 판단되는 함수 종속 관계이므로 제외한다. 
  
</details>

-----------------------
